<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>QR Quine | SLC is</title><meta name=description content="Sharpest corner of the IPFS."><link rel=stylesheet href=/css/simple.css/simple.min.css media=all onload='this.media="all",this.onload=null'></head><body><header><nav><a href=/>Home</a>
<a href=/posts/>Posts</a>
<a href=/music/>Music</a>
<a href=/about/>About</a></nav><h1><span>QR Quine</span></h1><i>2021/09/25</i></header><main><p><img src=/images/qrQuine.webp alt="QR Quine"></p><p>I was hoping to encode the <abbr title="Base 64">b64</abbr> string of a <abbr title="Quick Response">QR</abbr> code into another QR code. The catch was that the encoded QR code would match the encoded string of the QR code. When you scan the QR code, it would return itself.</p><p>Sadly, this is most likely <a href=https://stackoverflow.com/q/5536323>impossible</a>, though I might still try to create a search function for it. Instead, I optimized Alok&rsquo;s <a href=https://www.quaxio.com/qrquine>approach</a> a bit with Javascript&rsquo;s arrow syntax. Minor things like that enabled me to create an HTML-validated QR quine.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#a6e22e>data</span><span style=color:#f92672>:</span><span style=color:#a6e22e>text</span><span style=color:#f92672>/</span><span style=color:#a6e22e>html</span>,<span style=color:#f92672>&lt;!</span><span style=color:#a6e22e>DOCTYPE</span> <span style=color:#a6e22e>html</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#a6e22e>en</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>head</span><span style=color:#f92672>&gt;&lt;</span><span style=color:#a6e22e>title</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>q</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/title&gt;&lt;canvas id=C&gt;&lt;script&gt;P=(r,c,v)=&gt;{I[A*r+c]=v;return!(v&amp;&amp;C.getContext(&#39;2d&#39;).fillRect(c*3,r*3,3,3))};S=(i,j)=&gt;{for(r=O;r&lt;8;r++)for(c=O;c&lt;8;c++)j+c&gt;O&amp;&amp;j+c&lt;A&amp;&amp;P(i+r,j+c,0&lt;r&amp;&amp;(r&lt;7&amp;&amp;!(c%6))||((c+1)%8&amp;&amp;!(r%6)||1&lt;r&amp;&amp;(r&lt;5&amp;&amp;(1&lt;c&amp;&amp;c&lt;5))))};N=(a,b)=&gt;{if(a[L]&lt;b[L])return a;o=a[0]/b[0];for(i=0;i&lt;b[L];a[i++]^=z){m=b[i];n=o;for(z=0;m;n&gt;255&amp;&amp;(n^=285))m&amp;1&amp;&amp;(z^=n),n&lt;&lt;=1,m&gt;&gt;=1}a.shift();return N(a,b)};C.height=C.width=(A=133)*3;I=[];X=O=-1;L=&#39;length&#39;;S(0,0);S(A-7,0);S(i=0,A-7);for(B=[6,30,54,78,102,126];i&lt;6;i++)for(j=0;j&lt;6;j++)if(!I[A*B[i]+B[j]])for(r=-2;r&lt;3;r++)for(c=-2;c&lt;3;c++)P(B[i]+r,B[j]+c,r&amp;&amp;!(r%2)||c&amp;&amp;!(c%2)||!r&amp;&amp;!c);for(i=8;i&lt;A-8;P(6,i++,j))j=!(i%2),P(i,6,j);for(i=0;i&lt;15;i++)j=29427&gt;&gt;i&amp;1,i&lt;6&amp;&amp;P(i,8,j)||i&lt;8&amp;&amp;P(i+1,8,j)||P(118+i,8,j),i&lt;8&amp;&amp;P(8,A-i-1,j)||i&lt;9&amp;&amp;P(8,15-i,j)||P(8,14-i,j);P(A-8,8,1);for(i=0;i&lt;18;P(i%3+A-11,i++/3|0,k))k=119615&gt;&gt;i&amp;1,P(i/3|0,i%3+A-11,k);for(D=[4,i=0,6,0,6];i&lt;1542;D=D.concat([j&gt;&gt;4,j&amp;15]))j=unescape(location.href).charCodeAt(i++);D.push(r=0);for(E=3262;D[L]&lt;E;D=D.concat([1,1]))D=D.concat([14,12]);F=[];for(Z=k=r=0;r&lt;14;r++){i=116+(r&gt;6);l=[];for(j=0;j&lt;i;F[r+j*14-(j&gt;115?7:0)]=l[j++])l[j]=(D[k++]&lt;&lt;4)|D[k++];l=l.concat(new Array(30));for(j=0;j&lt;30;j++)F[r+j*14+1631]=N(l,[1,212,246,77,73,195,192,75,98,5,70,103,177,22,217,138,51,181,246,72,25,18,46,228,74,216,195,11,106,130,150])[j]}Y=7;for(x=i=A-1;i&gt;0;i-=2){for(i==6&amp;&amp;i--;x&gt;O&amp;&amp;x&lt;A;x+=X)for(j=0;j&lt;2;j++)if(I[A*x+i-j]==B[9])k=Z&lt;F[L]&amp;&amp;F[Z]&gt;&gt;Y&amp;1,P(x,i-j,x%2?k:!k),--Y&lt;0&amp;&amp;(Z++,Y=7);x-=X;X=-X}&lt;/script&gt;&lt;/canvas&gt;</span>
</span></span></code></pre></div><p><img src=/images/qrJsQuine.webp alt="JavaScript QR Quine"></p><p>When this text is pasted into a browser&rsquo;s URL, it loads a QR code containing the same link. Here, a QR code is generated, but this is just a little better than having a QR code link to itself.</p><iframe class=web width=100% frameborder=0 src="https://replit.com/@splch/qr-quine?lite=1"></iframe></main><footer><small>Thanks to <a href=https://gohugo.io/>Hugo</a> for building and <a href=https://simplecss.org/>SimpleCSS</a>
for styling
â™¡</small></footer></body></html>