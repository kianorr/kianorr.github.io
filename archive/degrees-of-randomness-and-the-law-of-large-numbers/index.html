<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In a previous post comparing quantum and avalanche diode methods of true random number generation, an interesting pattern emerged. The quantum random numbers would pass more STS tests than avalanche diode random numbers. Seemingly, the quantum RNG converges to a mean before the diode RNG.
This should not be the case since both methods produce true random numbers, so this post will be exploring if this is actually occurring and why."><title>Degrees of Randomness and the Law of Large Numbers</title><link rel=canonical href=https://slc.is/archive/degrees-of-randomness-and-the-law-of-large-numbers/><link rel=stylesheet href=/scss/style.min.450926226e724574a6b936335ea06111f8aeb253d932c86cb2cc807341cd2889.css><meta property="og:title" content="Degrees of Randomness and the Law of Large Numbers"><meta property="og:description" content="In a previous post comparing quantum and avalanche diode methods of true random number generation, an interesting pattern emerged. The quantum random numbers would pass more STS tests than avalanche diode random numbers. Seemingly, the quantum RNG converges to a mean before the diode RNG.
This should not be the case since both methods produce true random numbers, so this post will be exploring if this is actually occurring and why."><meta property="og:url" content="https://slc.is/archive/degrees-of-randomness-and-the-law-of-large-numbers/"><meta property="og:site_name" content="SLC is"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Randomness"><meta property="article:tag" content="Linux"><meta property="article:published_time" content="2022-02-04T00:00:00+00:00"><meta property="article:modified_time" content="2022-02-04T00:00:00+00:00"><meta property="og:image" content="https://slc.is/images/randomCoefficients.webp"><meta name=twitter:title content="Degrees of Randomness and the Law of Large Numbers"><meta name=twitter:description content="In a previous post comparing quantum and avalanche diode methods of true random number generation, an interesting pattern emerged. The quantum random numbers would pass more STS tests than avalanche diode random numbers. Seemingly, the quantum RNG converges to a mean before the diode RNG.
This should not be the case since both methods produce true random numbers, so this post will be exploring if this is actually occurring and why."><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://slc.is/images/randomCoefficients.webp"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><div class=site-meta><h1 class=site-name><a href=/>SLC is</a></h1><h2 class=site-description>⚛️ Big on quantum</h2></div></header><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archive/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archive</span></a></li><li><a href=/music/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Music</span></a></li><li><a href=/about/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg><span>About</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>Dark Mode</span></li></div></ol></aside><main class="main full-width"><article class="has-image main-article"><header class=article-header><div class=article-image><a href=/archive/degrees-of-randomness-and-the-law-of-large-numbers/><img src=/images/randomCoefficients.webp loading=lazy alt="Featured image of post Degrees of Randomness and the Law of Large Numbers"></a></div><div class=article-details><header class=article-category><a href=/categories/quantum/ style=background-color:#6929c4;color:#fff>Quantum</a>
<a href=/categories/math/>Math</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/archive/degrees-of-randomness-and-the-law-of-large-numbers/>Degrees of Randomness and the Law of Large Numbers</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Feb 04, 2022</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>7 minute read</time></div></footer></div></header><section class=article-content><p>In a previous post comparing quantum and avalanche diode methods of true random number generation, an interesting pattern emerged. The quantum random numbers would pass more STS tests than avalanche diode random numbers. Seemingly, the quantum RNG converges to a mean before the diode RNG.</p><p>This should not be the case since both methods produce true random numbers, so this post will be exploring if this is actually occurring and why.</p><h2 id=code>Code</h2><p>We&rsquo;ll be using <code>C</code> to do this analysis since it&rsquo;s fast enough for the scale I need.</p><p>The first task will be opening a file of random data by variable amounts. The <a class=link href=https://pubs.opengroup.org/onlinepubs/9699919799/functions/fread.html#tag_16_164 target=_blank rel=noopener><code>fread</code></a> command takes a filename and number of bytes to read as arguments, so that&rsquo;ll work well.</p><p>Specifically, the file (let&rsquo;s call it <code>random</code>) needs to be read in incrementing amounts, so the code will look like this:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#define MAX_READ 5
</span></span></span><span class=line><span class=cl><span class=cp>#define FILE_NAME &#34;random&#34;
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=err>…</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>FILE</span> <span class=o>*</span> <span class=n>stream</span> <span class=o>=</span> <span class=n>fopen</span><span class=p>(</span><span class=n>FILE_NAME</span><span class=p>,</span> <span class=s>&#34;r&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=p>(</span><span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>bytes</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>bytes</span> <span class=o>&lt;</span> <span class=n>MAX_READ</span><span class=p>;</span> <span class=n>bytes</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=kt>char</span> <span class=n>buffer</span><span class=p>[</span><span class=n>bytes</span><span class=p>];</span>
</span></span><span class=line><span class=cl>	<span class=n>fread</span><span class=p>(</span><span class=o>&amp;</span><span class=n>buffer</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=kt>char</span><span class=p>),</span> <span class=n>bytes</span><span class=p>,</span> <span class=n>stream</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>This is storing some number of bytes in a buffer array. Now we can iterate through that array to determine the mean. Keep in mind that the theoretical mean is 0.5, so this is eventually going to compare the rates at which quantum and avalanche diode RNGs converge to the theoretical mean.</p><p>We&rsquo;re iterating through 8 bits at a time, so to find each binary mean, we&rsquo;ll count the number of ones in binary and divide by 8.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=k>static</span> <span class=kr>inline</span> <span class=kt>float</span> <span class=nf>binaryMean</span><span class=p>(</span><span class=kt>char</span> <span class=n>byte</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>// https://stackoverflow.com/a/698183
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>return</span> <span class=p>(</span><span class=n>byte</span> <span class=o>*</span> <span class=mo>01001001001ULL</span> <span class=o>&amp;</span> <span class=mo>042104210421ULL</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=o>%</span> <span class=mo>017</span> <span class=o>/</span> <span class=mf>8.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>The remainder is just reading multiple files and parsing the data as a CSV.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#define MAX_READ 1000
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>long</span> <span class=kt>double</span> <span class=n>array</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=n>MAX_READ</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>static</span> <span class=kr>inline</span> <span class=kt>float</span> <span class=nf>binaryMean</span><span class=p>(</span><span class=kt>unsigned</span> <span class=kt>char</span> <span class=n>byte</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>(</span><span class=n>byte</span> <span class=o>*</span> <span class=mo>01001001001ULL</span> <span class=o>&amp;</span> <span class=mo>042104210421ULL</span><span class=p>)</span> <span class=o>%</span> <span class=mo>017</span> <span class=o>/</span> <span class=mf>8.0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>analyzeFile</span><span class=p>(</span><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>filename</span><span class=p>,</span> <span class=k>const</span> <span class=kt>char</span> <span class=n>filenum</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>FILE</span> <span class=o>*</span><span class=n>stream</span> <span class=o>=</span> <span class=n>fopen</span><span class=p>(</span><span class=n>filename</span><span class=p>,</span> <span class=s>&#34;r&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>bytes</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>bytes</span> <span class=o>&lt;=</span> <span class=n>MAX_READ</span><span class=p>;</span> <span class=n>bytes</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>buffer</span><span class=p>[</span><span class=n>bytes</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=n>fread</span><span class=p>(</span><span class=o>&amp;</span><span class=n>buffer</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=kt>char</span><span class=p>),</span> <span class=n>bytes</span><span class=p>,</span> <span class=n>stream</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>long</span> <span class=kt>double</span> <span class=n>mean</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=p>(</span><span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>bytes</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>mean</span> <span class=o>+=</span> <span class=n>binaryMean</span><span class=p>(</span><span class=n>buffer</span><span class=p>[</span><span class=n>i</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>array</span><span class=p>[</span><span class=n>filenum</span><span class=p>][</span><span class=n>bytes</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>mean</span> <span class=o>/</span> <span class=n>bytes</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>fclose</span><span class=p>(</span><span class=n>stream</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>analyzeFile</span><span class=p>(</span><span class=s>&#34;../../randomReports/quantum&#34;</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>analyzeFile</span><span class=p>(</span><span class=s>&#34;../../randomReports/avalanche&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>printf</span><span class=p>(</span><span class=s>&#34;Theoretical Mean,Quantum Mean,Avalanche Diode Mean</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>line</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>line</span> <span class=o>&lt;</span> <span class=n>MAX_READ</span><span class=p>;</span> <span class=n>line</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=s>&#34;0.5,%Lf,%Lf</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>array</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>line</span><span class=p>],</span> <span class=n>array</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=n>line</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>The astute among us 🔴 will notice that I&rsquo;m printing the data to stout; however, I&rsquo;ll actually pull a *nix and piping the output to gnuplot.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>gcc -c -o main.o main.c <span class=o>&amp;&amp;</span> gcc ./main.o -o main <span class=o>&amp;&amp;</span> ./main <span class=p>|</span> cat &gt; /tmp/gnuplotdata.csv <span class=o>&amp;&amp;</span> gnuplot -p -e <span class=s2>&#34;set title &#39;Quantum vs. Avalanche&#39;;set xlabel &#39;Average Length&#39;;set ylabel &#39;Average&#39;;set datafile separator &#39;,&#39;;plot for [col=1:3] &#39;/tmp/gnuplotdata.csv&#39; using col with lines title columnheader;pause -1&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>That&rsquo;s <em>sus</em> but why have pipes if you never use them? Anyways, we can now begin comparing convergence.</p><h2 id=analysis>Analysis</h2><p><img src=/images/quantumAvalanchePlot.webp loading=lazy alt="Gnuplot Mean Convergence Plot"></p><p>This is the plot outputted by gnuplot and it looks like both RNGs converge to 0.5 at equal rates.</p><blockquote><p>The differing rates to randomness is deeper than approaching the mean.</p></blockquote><p>I&rsquo;ll now be using the <a class=link href=https://www.fourmilab.ch/random/ target=_blank rel=noopener>ent</a> tool for statistical testing.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>dd <span class=k>if</span><span class=o>=</span>../../randomReports/randomData <span class=nv>bs</span><span class=o>=</span><span class=m>104857601</span> <span class=nv>count</span><span class=o>=</span><span class=m>8</span> <span class=nv>iflag</span><span class=o>=</span>fullblock 2&gt;/dev/null <span class=p>|</span> ent -b
</span></span></code></pre></td></tr></table></div></div><p>Entropy = 1.000000 bits per bit.</p><p>Optimum compression would reduce the size
of this 838860800 bit file by 0 percent.</p><p>Chi square distribution for 838860800 samples is 1.41, and randomly would exceed this value 23.50 percent of the times.</p><p>Arithmetic mean value of data bits is 0.5000 (0.5 = random).</p><p>Monte Carlo value for Pi is 3.141312452 (error 0.01 percent).</p><p>Serial correlation coefficient is -0.000014 (totally uncorrelated = 0.0).</p><p>Entropy = 1.000000 bits per bit.</p><p>Optimum compression would reduce the size
of this 838860800 bit file by 0 percent.</p><p>Chi square distribution for 838860800 samples is 3.09, and randomly would exceed this value 7.88 percent of the times.</p><p>Arithmetic mean value of data bits is 0.5000 (0.5 = random).</p><p>Monte Carlo value for Pi is 3.141780515 (error 0.01 percent).</p><p>Serial correlation coefficient is -0.000027 (totally uncorrelated = 0.0).</p><p>Entropy = 1.000000 bits per bit.</p><p>Optimum compression would reduce the size
of this 838860800 bit file by 0 percent.</p><p>Chi square distribution for 838860800 samples is 0.62, and randomly would exceed this value 43.12 percent of the times.</p><p>Arithmetic mean value of data bits is 0.5000 (0.5 = random).</p><p>Monte Carlo value for Pi is 3.141913953 (error 0.01 percent).</p><p>Serial correlation coefficient is 0.000048 (totally uncorrelated = 0.0).</p><p>When applied to all three files, these are the results we get:</p><div class=table-wrapper><table><thead><tr><th>Type</th><th style=text-align:center>Chi Square</th><th style=text-align:center>Monte Carlo Difference</th><th style=text-align:center>Serial Correlation Coefficient</th></tr></thead><tbody><tr><td>Quantum</td><td style=text-align:center>1.41</td><td style=text-align:center>0.000280202</td><td style=text-align:center>-0.000014</td></tr><tr><td>Avalanche Diode</td><td style=text-align:center>3.09</td><td style=text-align:center>-0.000187861</td><td style=text-align:center>-0.000027</td></tr><tr><td>Pseudorandom Generator</td><td style=text-align:center>0.62</td><td style=text-align:center>-0.000321299</td><td style=text-align:center>0.000048</td></tr></tbody></table></div><p>We know that the PRNG is the least random, so if there are any tests that the PRNG does best, that test can not be used.</p><p>Unsurprisingly, the PRNG performs worst in every test. Avalanche diode outperforms quantum in Chi Square <em>and</em> estimating Pi. Quantum only outperformed Avalanche diode in Serial Correlation Coefficient. Since the goal is to observe convergence of randomness, serial correlation makes the most sense to use.</p><p>What we&rsquo;ll do now is observe the serial correlation coefficients of quantum and avalanche diode as the number of trials increases.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdio.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;stdlib.h&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#define MAX_READ 2500
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=kt>long</span> <span class=kt>double</span> <span class=n>array</span><span class=p>[</span><span class=mi>2</span><span class=p>][</span><span class=n>MAX_READ</span><span class=p>];</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=nf>analyzeFile</span><span class=p>(</span><span class=k>const</span> <span class=kt>char</span> <span class=o>*</span><span class=n>filename</span><span class=p>,</span> <span class=k>const</span> <span class=kt>char</span> <span class=n>filenum</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>FILE</span> <span class=o>*</span><span class=n>f</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=c1>// I increased the array sizes because a memory
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=c1>// leak and I didn&#39;t care to track it down
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=kt>char</span> <span class=n>output</span><span class=p>[</span><span class=mi>1035</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=kt>char</span> <span class=n>path</span><span class=p>[</span><span class=mi>1000</span><span class=p>];</span>
</span></span><span class=line><span class=cl>  <span class=n>snprintf</span><span class=p>(</span><span class=n>path</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>path</span><span class=p>),</span> <span class=s>&#34;%s%s%s&#34;</span><span class=p>,</span> <span class=s>&#34;dd if=&#34;</span><span class=p>,</span> <span class=n>filename</span><span class=p>,</span> <span class=s>&#34; bs=&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>bytes</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span> <span class=n>bytes</span> <span class=o>&lt;=</span> <span class=n>MAX_READ</span><span class=p>;</span> <span class=n>bytes</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>byteString</span><span class=p>[</span><span class=mi>21</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=n>snprintf</span><span class=p>(</span><span class=n>byteString</span><span class=p>,</span> <span class=mi>21</span><span class=p>,</span> <span class=s>&#34;%lu&#34;</span><span class=p>,</span> <span class=n>bytes</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>char</span> <span class=n>command</span><span class=p>[</span><span class=mi>2560</span><span class=p>];</span>
</span></span><span class=line><span class=cl>    <span class=n>snprintf</span><span class=p>(</span><span class=n>command</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>command</span><span class=p>),</span> <span class=s>&#34;%s%s%s&#34;</span><span class=p>,</span> <span class=n>path</span><span class=p>,</span> <span class=n>byteString</span><span class=p>,</span>
</span></span><span class=line><span class=cl>             <span class=s>&#34; count=8 iflag=fullblock 2&gt;/dev/null | ent -b | tail &#34;</span>
</span></span><span class=line><span class=cl>             <span class=s>&#34;-1 | cut -c 35-43 | xargs&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>f</span> <span class=o>=</span> <span class=n>popen</span><span class=p>(</span><span class=n>command</span><span class=p>,</span> <span class=s>&#34;r&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=p>(</span><span class=n>fgets</span><span class=p>(</span><span class=n>output</span><span class=p>,</span> <span class=k>sizeof</span><span class=p>(</span><span class=n>output</span><span class=p>),</span> <span class=n>f</span><span class=p>)</span> <span class=o>!=</span> <span class=nb>NULL</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=n>array</span><span class=p>[</span><span class=n>filenum</span><span class=p>][</span><span class=n>bytes</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span> <span class=o>=</span> <span class=n>strtold</span><span class=p>(</span><span class=n>output</span><span class=p>,</span> <span class=nb>NULL</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=n>analyzeFile</span><span class=p>(</span><span class=s>&#34;../../randomReports/quantum&#34;</span><span class=p>,</span> <span class=mi>0</span><span class=p>);</span>
</span></span><span class=line><span class=cl>  <span class=n>analyzeFile</span><span class=p>(</span><span class=s>&#34;../../randomReports/avalanche&#34;</span><span class=p>,</span> <span class=mi>1</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=n>printf</span><span class=p>(</span><span class=s>&#34;Theoretical Coefficient,Quantum Coefficient,Avalanche Diode &#34;</span>
</span></span><span class=line><span class=cl>         <span class=s>&#34;Coefficient</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=p>(</span><span class=kt>unsigned</span> <span class=kt>long</span> <span class=n>line</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>line</span> <span class=o>&lt;</span> <span class=n>MAX_READ</span><span class=p>;</span> <span class=n>line</span><span class=o>++</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>printf</span><span class=p>(</span><span class=s>&#34;0,%Lf,%Lf</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>,</span> <span class=n>array</span><span class=p>[</span><span class=mi>0</span><span class=p>][</span><span class=n>line</span><span class=p>],</span> <span class=n>array</span><span class=p>[</span><span class=mi>1</span><span class=p>][</span><span class=n>line</span><span class=p>]);</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Now, much like before, we&rsquo;ll pipe this output into gnuplot.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>gcc -c -o main.o main.c <span class=o>&amp;&amp;</span> gcc ./main.o -o main <span class=o>&amp;&amp;</span> ./main <span class=p>|</span> cat &gt; /tmp/gnuplotdata.csv <span class=o>&amp;&amp;</span> gnuplot -p -e <span class=s2>&#34;set title &#39;Quantum vs. Avalanche&#39;;set xlabel &#39;Size (Bytes)&#39;;set ylabel &#39;Serial Correlation Coefficient&#39;;set datafile separator &#39;,&#39;;plot for [col=1:3] &#39;/tmp/gnuplotdata.csv&#39; using col with lines title columnheader;pause -1&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=/images/randomCoefficients.webp loading=lazy alt="Gnuplot Coefficient Convergence Plot"></p><p>Well, this is interesting.</p><h2 id=explanation>Explanation</h2><p>I have a couple theories for why these two methods of TRNG approach correlation coefficients of 0 at different rates.</p><ol><li>Partial Measurements<ul><li>In a more complex system, there are more opportunities to be entangled with the environment which might increase correlation between measurements.</li></ul></li><li>Faulty Hardware<ul><li>The hardware might have some issue which causes data correlation</li></ul></li></ol><p>Obviously, the first explanation is more flashy, so I&rsquo;m hoping something along those lines is occurring. With the avalanche diode method, electrons will be entangled with the enclosure which is weakly entangled with everything around it. This additional entanglement could reduce the randomness of the sequence. Quantum methods of generation should, therefore, have varying rates of discorrelation based on their amounts of interaction with the environment.</p><p>I&rsquo;ll try to compare these rates with more precise avalanche diode machines and superconducting, photonic, nuclear magnetic resonance, dot, and other quantum methods.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/randomness/>Randomness</a>
<a href=/tags/linux/>Linux</a></section></footer><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css integrity=sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn crossorigin=anonymous><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js integrity=sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8 crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js integrity=sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl crossorigin=anonymous defer></script><script>window.addEventListener("DOMContentLoaded",()=>{renderMathInElement(document.querySelector(`.article-content`),{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script></article><aside class=related-contents--wrapper><h2 class=section-title>Related contents</h2><div class=related-contents><div class="flex article-list--tile"><article class=has-image><a href=/archive/pgp/><div class=article-image><img src=/images/pgp.webp loading=lazy data-key=pgp data-hash=/images/pgp.webp></div><div class=article-details><h2 class=article-title>Generating a PGP Key</h2></div></a></article><article class=has-image><a href=/archive/quantum-physics-i/><div class=article-image><img src=/images/ocw1.webp loading=lazy data-key data-hash=/images/ocw1.webp></div><div class=article-details><h2 class=article-title>Quantum Physics I</h2></div></a></article><article class=has-image><a href=/archive/quantum-versus-avalanche-breakdown-randomness/><div class=article-image><img src=/images/onerng.webp loading=lazy data-key data-hash=/images/onerng.webp></div><div class=article-details><h2 class=article-title>Quantum versus Avalanche Breakdown Randomness</h2></div></a></article><article class=has-image><a href=/archive/meancolor/><div class=article-image><img src=/images/purple.webp loading=lazy data-key=meancolor data-hash=/images/purple.webp></div><div class=article-details><h2 class=article-title>The Meanest Color</h2></div></a></article><article class=has-image><a href=/archive/averagergb/><div class=article-image><img src=/images/rgb.webp loading=lazy data-key=averageRGB data-hash=/images/rgb.webp></div><div class=article-details><h2 class=article-title>RGB for Average Contrast</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy; 2021 - 2022 SLC is</section><section class=powerby></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css integrity="sha256-c0uckgykQ9v5k+IqViZOZKc47Jn7KQil4/MP3ySA3F8=" crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE=" crossorigin=anonymous></main><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#code>Code</a></li><li><a href=#analysis>Analysis</a></li><li><a href=#explanation>Explanation</a></li></ol></nav></div></section></aside></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>